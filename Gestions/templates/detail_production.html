{% extends "base.html" %}

{% block title %}Détails de la Production{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>Détails de la Production</h2>
    <div class="card mt-4">
        <div class="card-body">
            <h4 class="card-title">{{ production.culture }} - {{ production.region }}</h4>
            <p><strong>Superficie (ha) :</strong> {{ production.superficie }}</p>
            <p><strong>Rendement (tonnes/ha) :</strong> {{ production.rendement }}</p>
            <p><strong>Date de Plantation :</strong> {{ production.date_plantation|date:"d/m/Y" }}</p>
            <p><strong>Date de Récolte :</strong> {{ production.date_recolte|date:"d/m/Y" }}</p>
            <p><strong>Commentaires :</strong> {{ production.commentaires|default:"Aucun commentaire" }}</p>
        </div>
    </div>

    <!-- Section des commentaires -->
    <div class="mt-4">
        <h3>Commentaires</h3>
        <form method="post">
            {% csrf_token %}
            <div class="mb-3">
                <textarea class="form-control" name="comment" rows="3" placeholder="Ajouter un commentaire..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Publier le commentaire</button>
        </form>

        <!-- Liste des commentaires -->
        {% if production.commentaires %}
            <div class="mt-3">
                <p>{{ production.commentaires }}</p>
            </div>
        {% else %}
            <p class="mt-3">Aucun commentaire pour le moment.</p>
        {% endif %}
    </div>

    <!-- Bouton pour retourner à la liste des productions -->
    <div class="mt-4">
        <a href="{% url 'Gestions:suivi_agricole' %}" class="btn btn-secondary">Retour à la liste des productions</a>
    </div>
</div>
{% endblock %}
